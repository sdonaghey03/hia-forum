"use strict";define("forum/groups/list",["forum/infinitescroll","benchpress"],function(r,t){var e={};e.init=function(){r.init(e.loadMoreGroups);$('button[data-action="new"]').on("click",function(){bootbox.prompt("[[groups:new-group.group_name]]",function(r){if(r&&r.length){socket.emit("groups.create",{name:r},function(t){if(!t){ajaxify.go("groups/"+utils.slugify(r))}else{app.alertError(t.message)}})}})});var t=utils.params();$("#search-sort").val(t.sort||"alpha");$("#search-text").on("keyup",e.search);$("#search-button").on("click",e.search);$("#search-sort").on("change",function(){ajaxify.go("groups?sort="+$("#search-sort").val())})};e.loadMoreGroups=function(e){if(e<0){return}r.loadMore("groups.loadMore",{sort:$("#search-sort").val(),after:$('[component="groups/container"]').attr("data-nextstart")},function(r,e){if(r&&r.groups.length){t.parse("partials/groups/list",{groups:r.groups},function(r){$("#groups-list").append(r);e()})}else{e()}if(r&&r.nextStart){$('[component="groups/container"]').attr("data-nextstart",r.nextStart)}})};e.search=function(){var r=$("#groups-list");var e=$("#search-text");var o=$("#search-sort");socket.emit("groups.search",{query:e.val(),options:{sort:o.val(),filterHidden:true}},function(e,o){if(e){return app.alertError(e.message)}o=o.filter(function(r){return r.name!=="registered-users"&&r.name!=="guests"});t.parse("partials/groups/list",{groups:o},function(t){r.empty().append(t)})});return false};return e});
//# sourceMappingURL=public/src/client/groups/list.js.map