"use strict";define("admin/manage/groups",["translator","benchpress"],function(e,a){var r={};var t=0;r.init=function(){var e=$("#create-modal");var a=$("#create-group-name");var r=$("#create-modal-go");var t=$("#create-modal-error");n();e.on("keypress",function(e){if(e.keyCode===13){r.click()}});$("#create").on("click",function(){e.modal("show");setTimeout(function(){a.focus()},250)});r.on("click",function(){var r={name:a.val(),description:$("#create-group-desc").val()};socket.emit("admin.groups.create",r,function(r){if(r){if(r.hasOwnProperty("message")&&utils.hasLanguageKey(r.message)){r="[[admin/manage/groups:alerts.create-failure]]"}t.translateHtml(r).removeClass("hide")}else{t.addClass("hide");a.val("");e.on("hidden.bs.modal",function(){ajaxify.refresh()});e.modal("hide")}})});$(".groups-list").on("click","button[data-action]",function(){var e=$(this);var a=e.attr("data-action");var r=e.parents("tr[data-groupname]").attr("data-groupname");switch(a){case"delete":bootbox.confirm("[[admin/manage/groups:alerts.confirm-delete]]",function(e){if(e){socket.emit("groups.delete",{groupName:r},function(e){if(e){return app.alertError(e.message)}ajaxify.refresh()})}});break}})};function n(){var r=$("#group-search");function n(){if(!r.val()){return ajaxify.refresh()}$(".pagination").addClass("hide");var t=$(".groups-list");socket.emit("groups.search",{query:r.val(),options:{sort:"date"}},function(r,n){if(r){return app.alertError(r.message)}a.parse("admin/manage/groups","groups",{groups:n},function(a){e.translate(a,function(e){t.find("[data-groupname]").remove();t.find("tr").after(e)})})})}r.on("keyup",function(){if(t){clearTimeout(t);t=0}t=setTimeout(n,200)})}return r});
//# sourceMappingURL=public/src/admin/manage/groups.js.map