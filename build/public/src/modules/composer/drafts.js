"use strict";define("composer/drafts",function(){var e={};var t;var r=false;e.init=function(e,r){var o=e.find("textarea");o.on("keyup",function(){a();t=setTimeout(function(){i(e,r)},1e3)})};function a(){if(t){clearTimeout(t);t=0}}e.getDraft=function(e){return localStorage.getItem(e)};function i(t,r){var a;if(o()&&r&&r.save_id&&t.length){a=t.find("textarea").val();if(a.length){localStorage.setItem(r.save_id,a)}else{e.removeDraft(r.save_id)}}}e.removeDraft=function(t){a();e.updateVisibility("available",t);e.updateVisibility("open",t);return localStorage.removeItem(t)};e.updateVisibility=function(e,t,r){if(!o()){return}try{var a=localStorage.getItem("drafts:"+e);a=a?JSON.parse(a):[]}catch(e){console.warn("[composer/drafts] Could not read list of open drafts");var a=[]}var i=a.indexOf(t);if(r&&i===-1){a.push(t)}else if(!r&&i!==-1){a.splice(i,1)}localStorage.setItem("drafts:"+e,JSON.stringify(a))};function o(){if(r){return r}try{localStorage.setItem("test","test");localStorage.removeItem("test");r=true;return true}catch(e){r=false;return false}}return e});
//# sourceMappingURL=node_modules/nodebb-plugin-composer-default/static/lib/composer/drafts.js.map