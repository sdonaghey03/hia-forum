{"version":3,"sources":["node_modules/nodebb-plugin-composer-default/static/lib/composer/formatting.js"],"names":["define","controls","preview","resize","formatting","formattingDispatchTable","picture","postContainer","this","find","click","upload","tags","toggleClass","zen","$","window","one","onResize","screenfull","isFullscreen","app","toggleNavbar","removeClass","reposition","off","addClass","focus","on","exit","toggle","buttons","addComposerButtons","x","numButtons","length","before","name","title","iconClass","addButton","onClick","replace","push","addButtonDispatch","addHandler","format","attr","textarea","parents","hasOwnProperty","call","selectionStart","selectionEnd","render"],"mappings":"AAAA,aAIAA,OAAO,uBAAwB,oBAAqB,mBAAoB,mBAAoB,SAASC,EAAUC,EAASC,GAEvH,IAAIC,KAEJ,IAAIC,GACHC,QAAS,WACR,IAAIC,EAAgBC,KACpBD,EAAcE,KAAK,UAAUC,SAG9BC,OAAQ,WACP,IAAIJ,EAAgBC,KACpBD,EAAcE,KAAK,UAAUC,SAG9BE,KAAM,WACL,IAAIL,EAAgBC,KACpBD,EAAcE,KAAK,mBAAmBI,YAAY,WAGnDC,IAAK,WACJ,IAAIP,EAAgBC,KACpBO,EAAEC,QAAQC,IAAI,SAAU,WACvB,SAASC,IACR,IAAKC,WAAWC,aAAc,CAC7BC,IAAIC,aAAa,MACjBP,EAAE,QAAQQ,YAAY,YACtBpB,EAAOqB,WAAWjB,GAClBQ,EAAEC,QAAQS,IAAI,SAAUP,IAI1B,GAAIC,WAAWC,aAAc,CAC5BC,IAAIC,aAAa,OACjBP,EAAE,QAAQW,SAAS,YACnBnB,EAAcE,KAAK,UAAUkB,QAE7BZ,EAAEC,QAAQY,GAAG,SAAUV,GAEvBH,EAAEC,QAAQC,IAAI,6GAA8GE,WAAWU,SAIzIV,WAAWW,WAIb,IAAIC,KAEJ3B,EAAW4B,mBAAqB,WAC/B,IAAI,IAAIC,EAAE,EAAEC,EAAWH,EAAQI,OAAOF,EAAEC,EAAWD,IAAK,CACvDlB,EAAE,+CAA+CqB,OAAO,kCAAoCL,EAAQE,GAAGI,KAAO,aAAeN,EAAQE,GAAGK,OAAS,IAAM,eAAiBP,EAAQE,GAAGM,UAAY,iBAIjMnC,EAAWoC,UAAY,SAASD,EAAWE,EAASH,GACnD,IAAID,EAAOE,EAAUG,QAAQ,SAAU,IAEvCrC,EAAwBgC,GAAQI,EAChCV,EAAQY,MACPN,KAAMA,EACNE,UAAWA,EACXD,MAAOA,KAITlC,EAAWwC,kBAAoB,SAASP,EAAMI,GAC7CpC,EAAwBgC,GAAQI,GAGjCrC,EAAWyC,WAAa,SAAStC,GAChCA,EAAcqB,GAAG,QAAS,qBAAsB,WAC/C,IAAIkB,EAAS/B,EAAEP,MAAMuC,KAAK,eACzBC,EAAWjC,EAAEP,MAAMyC,QAAQ,0BAA0BxC,KAAK,YAAY,GAEvE,GAAGJ,EAAwB6C,eAAeJ,GAAQ,CACjDzC,EAAwByC,GAAQK,KAAK5C,EAAeyC,EAAUA,EAASI,eAAgBJ,EAASK,cAChGnD,EAAQoD,OAAO/C,OAKlB,OAAOH","file":"node_modules/nodebb-plugin-composer-default/static/lib/composer/formatting.js","sourcesContent":["'use strict';\n\n/* globals app, define, screenfull */\n\ndefine('composer/formatting', ['composer/controls', 'composer/preview', 'composer/resize'], function(controls, preview, resize) {\n\n\tvar formatting = {};\n\n\tvar formattingDispatchTable = {\n\t\tpicture: function () {\n\t\t\tvar postContainer = this;\n\t\t\tpostContainer.find('#files').click();\n\t\t},\n\n\t\tupload: function () {\n\t\t\tvar postContainer = this;\n\t\t\tpostContainer.find('#files').click();\n\t\t},\n\n\t\ttags: function() {\n\t\t\tvar postContainer = this;\n\t\t\tpostContainer.find('.tags-container').toggleClass('hidden');\n\t\t},\n\n\t\tzen: function() {\n\t\t\tvar postContainer = this;\n\t\t\t$(window).one('resize', function() {\n\t\t\t\tfunction onResize() {\n\t\t\t\t\tif (!screenfull.isFullscreen) {\n\t\t\t\t\t\tapp.toggleNavbar(true);\n\t\t\t\t\t\t$('html').removeClass('zen-mode');\n\t\t\t\t\t\tresize.reposition(postContainer);\n\t\t\t\t\t\t$(window).off('resize', onResize);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (screenfull.isFullscreen) {\n\t\t\t\t\tapp.toggleNavbar(false);\n\t\t\t\t\t$('html').addClass('zen-mode');\n\t\t\t\t\tpostContainer.find('.write').focus();\n\n\t\t\t\t\t$(window).on('resize', onResize);\n\n\t\t\t\t\t$(window).one('action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard', screenfull.exit);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscreenfull.toggle();\n\t\t}\n\t};\n\n\tvar buttons = [];\n\n\tformatting.addComposerButtons = function() {\n\t\tfor(var x=0,numButtons=buttons.length;x<numButtons;x++) {\n\t\t\t$('.formatting-bar .formatting-group #fileForm').before('<li tabindex=\"-1\" data-format=\"' + buttons[x].name + '\" title=\"' + (buttons[x].title || '') + '\"><i class=\"' + buttons[x].iconClass + '\"></i></li>');\n\t\t}\n\t};\n\n\tformatting.addButton = function(iconClass, onClick, title) {\n\t\tvar name = iconClass.replace('fa fa-', '');\n\n\t\tformattingDispatchTable[name] = onClick;\n\t\tbuttons.push({\n\t\t\tname: name,\n\t\t\ticonClass: iconClass,\n\t\t\ttitle: title\n\t\t});\n\t};\n\n\tformatting.addButtonDispatch = function(name, onClick) {\n\t\tformattingDispatchTable[name] = onClick;\n\t};\n\n\tformatting.addHandler = function(postContainer) {\n\t\tpostContainer.on('click', '.formatting-bar li', function () {\n\t\t\tvar format = $(this).attr('data-format'),\n\t\t\t\ttextarea = $(this).parents('[component=\"composer\"]').find('textarea')[0];\n\n\t\t\tif(formattingDispatchTable.hasOwnProperty(format)){\n\t\t\t\tformattingDispatchTable[format].call(postContainer, textarea, textarea.selectionStart, textarea.selectionEnd);\n\t\t\t\tpreview.render(postContainer);\n\t\t\t}\n\t\t});\n\t};\n\n\treturn formatting;\n});\n"]}