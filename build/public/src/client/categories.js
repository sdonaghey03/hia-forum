"use strict";define("forum/categories",["components","translator","benchpress"],function(t,e,o){var n={};$(window).on("action:ajaxify.start",function(t,e){if(ajaxify.currentPage!==e.url){socket.removeListener("event:new_post",n.onNewPost)}});n.init=function(){app.enterRoom("categories");socket.removeListener("event:new_post",n.onNewPost);socket.on("event:new_post",n.onNewPost);$(".category-header").tooltip({placement:"bottom"})};n.onNewPost=function(t){if(t&&t.posts&&t.posts.length&&t.posts[0].topic){s(t.posts[0].topic.cid,t.posts[0])}};function s(e,o){var n=t.get("categories/category","cid",e);var s=n.attr("data-numRecentReplies");if(!s||!parseInt(s,10)){return}var r=n.find('[component="category/posts"]');i([o],function(t){t.hide();if(r.length===0){t.appendTo(n)}else{t.insertBefore(r.first())}t.fadeIn();app.createUserTooltips();t.find(".timeago").timeago();if(n.find('[component="category/posts"]').length>parseInt(s,10)){r.last().remove()}$(window).trigger("action:posts.loaded",{posts:[o]})})}function i(t,n){o.parse("partials/categories/lastpost","posts",{posts:t},function(t){e.translate(t,function(t){t=$(t);t.find(".post-content img:not(.not-responsive)").addClass("img-responsive");n(t)})})}return n});
//# sourceMappingURL=public/src/client/categories.js.map