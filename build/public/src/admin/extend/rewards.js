"use strict";define("admin/extend/rewards",["translator","benchpress"],function(a,e){var t={};var r;var n;var i;var s;t.init=function(){r=ajaxify.data.rewards;n=ajaxify.data.active;i=ajaxify.data.conditions;s=ajaxify.data.conditionals;$("[data-selected]").each(function(){d($(this))});$("#active").on("change","[data-selected]",function(){c($(this))}).on("click",".delete",function(){var a=$(this).parents("[data-id]");var e=a.attr("data-id");socket.emit("admin.rewards.delete",{id:e},function(a){if(a){app.alertError(a.message)}else{app.alertSuccess("[[admin/extend/rewards:alert.delete-success]]")}});a.remove();return false}).on("click",".toggle",function(){var a=$(this);var e=a.hasClass("btn-success");a.toggleClass("btn-warning").toggleClass("btn-success").translateHtml("[[admin/extend/rewards:"+(e?"disable":"enable")+"]]");return false});$("#new").on("click",f);$("#save").on("click",u);o()};function d(a){a.val(a.attr("data-selected"));switch(a.attr("name")){case"rid":l(a);break}}function c(a){a.attr("data-selected",a.val());switch(a.attr("name")){case"rid":l(a);break}}function l(a){var e=a.parents("[data-rid]");var t=e.find(".inputs");var n;var i="";for(var s in r){if(r.hasOwnProperty(s)){if(r[s].rid===a.attr("data-selected")){n=r[s].inputs;e.attr("data-rid",r[s].rid);break}}}if(!n){return app.alertError("[[admin/extend/rewards:alert.no-inputs-found]] "+a.attr("data-selected"))}n.forEach(function(a){i+='<label for="'+a.name+'">'+a.label+"<br />";switch(a.type){case"select":i+='<select name="'+a.name+'">';a.values.forEach(function(a){i+='<option value="'+a.value+'">'+a.name+"</option>"});break;case"text":i+='<input type="text" name="'+a.name+'" />';break}i+="</label><br />"});t.html(i)}function o(){$("[data-rid]").each(function(a){var e=$(this).find(".inputs");var t=n[a].rewards;for(var r in t){if(t.hasOwnProperty(r)){e.find('[name="'+r+'"]').val(t[r])}}})}function f(){var t=$("#active");var n={active:[{disabled:true,value:"",claimable:1,rid:null,id:null}],conditions:i,conditionals:s,rewards:r};e.parse("admin/extend/rewards","active",n,function(e){a.translate(e,function(a){a=$(a);t.append(a);a.find("select").val("")})})}function u(){var a=[];$("#active li").each(function(){var e={rewards:{}};var t=$(this).find("form.main").serializeArray();var r=$(this).find("form.rewards").serializeArray();t.forEach(function(a){e[a.name]=a.value});r.forEach(function(a){e.rewards[a.name]=a.value});e.id=$(this).attr("data-id");e.disabled=$(this).find(".toggle").hasClass("btn-success");a.push(e)});socket.emit("admin.rewards.save",a,function(a){if(a){app.alertError(a.message)}else{app.alertSuccess("[[admin/extend/rewards:alert.save-success]]")}})}return t});
//# sourceMappingURL=public/src/admin/extend/rewards.js.map